package com.certoclav.certoscale.database;


import com.j256.ormlite.field.DatabaseField;
import com.j256.ormlite.table.DatabaseTable;

import org.json.JSONException;
import org.json.JSONObject;




@DatabaseTable(tableName = "protocol")
public class Protocol {

	private static final String USER_ID = "userid";
	private static final String NAME = "name";
	private static final String DEVICEKEY = "devicekey";
	private static final String DATE = "date";
	private static final String VISIBILITY = "visibility";
	private static final String CONTENT = "content";


	private String name = "";
	private String userEmail = "";
	private String deviceKey = "";
	private String visibility = "global";
	private String content = "";
	private String date = "";


	@DatabaseField(generatedId = true, columnName = "protocol_id")
	private int item_id;

	@DatabaseField(columnName = "protocol_json")
	private String protocolJson;

	@DatabaseField(columnName = "cloud_id")
	private String cloudId;



	public String getDate() {
		return this.date;
	}

	public void setDate(String date) {
		this.date = date;
	}


	// id is generated by the database and set on the object automatically


	Protocol() {

	}





	public void generateProtocolJson(){
		JSONObject jsonObject = new JSONObject();
			try{
				jsonObject
						.put(NAME, name)
						.put(USER_ID, userEmail)
						.put(DEVICEKEY, deviceKey)
						.put(DATE, this.date)
						.put(VISIBILITY, visibility)
						.put(CONTENT, content);
			} catch (Exception e) {
				e.printStackTrace();
			}
		protocolJson = jsonObject.toString();
	}

	public void parseProtocolJson(){
		try {
			JSONObject jsonObject = new JSONObject(protocolJson);
			name = 		jsonObject.getString(NAME);
			userEmail = jsonObject.getString(USER_ID);
			deviceKey = jsonObject.getString(DEVICEKEY);
			this.date = 		jsonObject.getString(DATE);
			visibility = jsonObject.getString(VISIBILITY);
			content = 	jsonObject.getString(CONTENT);
		} catch (JSONException e) {
			e.printStackTrace();
		}

	}



	public Protocol(String cloudId, String protocolJson) {
		this.cloudId = cloudId;
		this.protocolJson = protocolJson;
	}

	public Protocol(String cloudId, String name, String userEmail, String deviceKey, String date, String visibility, String content) {
		this.cloudId = cloudId;
		this.name = name;
		this.userEmail = userEmail;
		this.deviceKey = deviceKey;
		this.date = date;
		this.visibility = visibility;
		this.content = content;
	}




	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public String getUserEmail() {
		return userEmail;
	}

	public void setUserEmail(String userEmail) {
		this.userEmail = userEmail;
	}

	public String getDeviceKey() {
		return deviceKey;
	}

	public void setDeviceKey(String deviceKey) {
		this.deviceKey = deviceKey;
	}

	public String getVisibility() {
		return visibility;
	}

	public void setVisibility(String visibility) {
		this.visibility = visibility;
	}

	public String getContent() {
		return content;
	}

	public void setContent(String content) {
		this.content = content;
	}

	public void setItem_id(int item_id) {
		this.item_id = item_id;
	}

	public String getCloudId() {
		return cloudId;
	}

	public void setCloudId(String cloudId) {
		this.cloudId = cloudId;
	}
}






